---
/**
 * TODO:
 *
 * - add/remove links visually
 * - add hidden form field for link collection
 * - add links to hidden form field on add/remove
 * - on submit, send hidden form field data
 *
 */
import Layout from '../layouts/Layout.astro'
import MainContent from '../components/MainContent.astro'
import PageHeader from '../components/text/PageHeader.astro'
---

<Layout title="Robby Webb | Contact">
  <MainContent>
    <PageHeader text="Contact" />
    <form method="POST" class="form" name="contactForm" action="/success/" data-netlify="true">
      <!-- Name -->
      <div class="form-field">
        <input id="name" type="text" name="name" placeholder=" " required />
        <label for="name">Name: <span>*</span></label>
      </div>

      <!-- Email -->
      <div class="form-field">
        <input id="email" type="email" name="email" placeholder=" " required />
        <label for="email">Email: <span>*</span></label>
      </div>

      <!-- Services -->
      <div class="form-field">
        <p>What services are you interested in?</p>

        <!-- Mixing -->
        <div class="checkbox">
          <input type="checkbox" id="mixing" name="mixing" value="Mixing" />
          <label for="mixing">Mixing</label>
        </div>

        <!-- Producing -->
        <div class="checkbox">
          <input type="checkbox" id="producing" name="producing" value="Producing" />
          <label for="producing">Producing</label>
        </div>

        <!-- Recording -->
        <div class="checkbox">
          <input type="checkbox" id="recording" name="recording" value="Recording" />
          <label for="recording">Recording</label>
        </div>
      </div>

      <!-- Relevant Links -->
      <div class="form-field">
        <div class="relevant-links">
          <input id="links" type="text" name="links" placeholder=" " />
          <label for="links">Relevant Links:</label>
          <button class="site-cta button" type="button">Add Link</button>
        </div>
        <div class="link-container">
          <div class="link">
            <span>supervoid.tv</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              aria-hidden="true"
              class="h-6 w-6"
              viewBox="0 0 24 24"
              ><path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18 18 6M6 6l12 12"></path></svg
            >
          </div>
          <div class="link">
            <span>wavelandweb.com</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              aria-hidden="true"
              class="h-6 w-6"
              viewBox="0 0 24 24"
              ><path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18 18 6M6 6l12 12"></path></svg
            >
          </div>
        </div>
      </div>

      <!-- Message -->
      <div class="form-field">
        <textarea id="message" name="message" cols="30" rows="5" placeholder=" " required
        ></textarea>
        <label for="message">Message: <span>*</span></label>
      </div>
      <button class="site-cta button" type="submit">Send Message</button>
    </form>
  </MainContent>
</Layout>

<style>
  .form {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-base) + 2.5rem);
    margin: 0 auto var(--spacing-section);
    max-width: 800px;
  }

  .form-field {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    font-size: clamp(var(--size-xs), 2vw, var(--size-sm));

    & label,
    & p {
      color: var(--color-grey);
    }

    & p {
      margin: 0 0 0.5rem;
      font-size: clamp(var(--size-xs), 2vw, var(--size-sm));
    }

    & textarea {
      resize: vertical;
    }

    &:has(input[type='checkbox']:checked) p {
      color: var(--color-white);
    }

    & .checkbox {
      display: flex;
      align-items: center;
      gap: 0.5rem;

      input {
        width: clamp(var(--size-xxs), 2vw, var(--size-xs));
        height: clamp(var(--size-xxs), 2vw, var(--size-xs));
        appearance: none;
        border: 1px solid var(--color-white);
        border-radius: var(--border-radius);

        &:checked {
          background-color: var(--color-pink);
        }

        &:checked + label {
          color: var(--color-white);
        }
      }
    }

    & .checkbox input,
    & .checkbox label {
      cursor: pointer;
    }

    & input,
    & textarea {
      padding: 0.5rem;
      color: var(--color-white);
      background-color: var(--color-black);
      font-weight: 300;
      border-bottom: 1px solid var(--color-white);
      border-top: none;
      border-left: none;
      border-right: none;
      border-radius: 0;
      outline: none;
      transition: all var(--transition-normal);
    }

    & input:focus,
    & textarea:focus {
      border-bottom: 1px solid var(--color-pink);
    }

    & input:not(:placeholder-shown):valid,
    & textarea:not(:placeholder-shown):valid {
      border-color: var(--color-white);
    }

    & input:not(:placeholder-shown):not(:valid),
    & textarea:not(:placeholder-shown):not(:valid) {
      border-color: var(--color-pink);
    }

    & input:not(:placeholder-shown):not(:valid) + label,
    & textarea:not(:placeholder-shown):not(:valid) + label {
      color: var(--color-pink);
    }

    &:not(:has(input[type='checkbox'])) label {
      position: absolute;
      top: 48%;
      left: 0.4rem;
      transform: translateY(-50%);
      transition: all var(--transition-normal);
    }

    & textarea + label {
      top: 1.5rem;
    }

    & input:not([type='checkbox']):focus + label,
    & textarea:focus + label,
    & span {
      color: var(--color-pink);
    }

    & input:not([type='checkbox']):not([name='links']):valid + label,
    & textarea:valid + label {
      color: var(--color-white);
    }

    & input:focus + label,
    & textarea:focus + label,
    & input:not(:placeholder-shown) + label,
    & textarea:not(:placeholder-shown) + label {
      top: -1rem;
      left: 0;
    }

    .relevant-links {
      position: relative;
      display: flex;
      flex-direction: row;
      gap: calc(var(--spacing-base));

      & input {
        flex: 1;

        &:not(:placeholder-shown) + label {
          color: var(--color-white);
        }
      }

      & label {
        top: 30%;
        color: var(--color-grey);
      }
    }

    .link-container {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 0.5rem;
      font-size: var(--size-xxs);

      & .link {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem;
        background-color: var(--color-pink);
        border-radius: var(--border-radius);

        & span {
          text-transform: uppercase;
          letter-spacing: 0.05rem;
          color: var(--color-black);
        }

        & svg {
          width: 1rem;
          height: 1rem;
          padding: 0.1rem;
          color: var(--color-black);
          border-radius: var(--border-radius);
          transition: all var(--transition-normal);
          cursor: pointer;

          &:hover {
            background-color: var(--color-white-faded);
          }
        }
      }
    }
  }
</style>
